<div class="app-layout">
  <!-- Sidebar for Desktop -->
  <aside class="sidebar" [class.sidebar-collapsed]="isCollapsed">
    <div class="sidebar-header">
      <div class="logo" (click)="toggleSidebar()">
        <i class="pi pi-file-edit"></i>
        @if (!isCollapsed) {
        <span class="brand-name">Cleansheet</span>
        }
      </div>
      @if (!isCollapsed) {
      <button class="collapse-btn" (click)="isCollapsed = true">
        <i class="pi pi-angle-left"></i>
      </button>
      }
    </div>

    <nav class="sidebar-nav">
      <a class="nav-item" routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <i class="pi pi-file-edit"></i>
        <span>Resumes</span>
      </a>

      <a class="nav-item" routerLink="/dashboard/getting-started" routerLinkActive="active">
        <i class="pi pi-briefcase"></i>
        <span>Builder</span>
      </a>



      <a class="nav-item" routerLink="/dashboard/ats-analysis" routerLinkActive="active">
        <i class="pi pi-receipt"></i>
        <span>ATS Analyzer</span>
      </a>


      <a class="nav-item" routerLink="/dashboard/settings" routerLinkActive="active">
        <i class="pi pi-cog"></i>
        <span>Settings</span>
      </a>

    </nav>

    <div class="sidebar-footer">
      <button class="nav-item logout-btn" (click)="logout()">
        <i class="pi pi-power-off"></i>
        <span>Logout</span>
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="main-wrapper">
    <!-- Top Header -->
    <header class="main-header">
      <button class="menu-toggle" (click)="toggleMobileSidebar()">
        <i class="pi pi-bars"></i>
      </button>

      <div class="header-title">
        <h1>@if (currentPageTitle) { {{ currentPageTitle }} }</h1>
      </div>

      <div class="header-actions">
        @if (showHeaderActions) {
        <button class="toggle-btn" (click)="toggleTemplates()" [class.active]="showTemplates"
          pTooltip="Toggle Templates">
          <i [class]="showTemplates ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
          <span>Template</span>
        </button>
        <p-button icon="pi pi-download" label="Download PDF" severity="secondary" [outlined]="true"></p-button>
        <p-button icon="pi pi-print" label="Print" severity="secondary" [outlined]="true"></p-button>
        }

        <p-button icon="pi pi-user" [rounded]="true" [text]="true" size="small"></p-button>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
      <router-outlet (activate)="onRouteActivate($event)"></router-outlet>
    </main>
  </div>

  <!-- Mobile Sidebar Overlay -->
  <div class="mobile-sidebar-overlay" [class.active]="isMobileSidebarOpen" (click)="closeMobileSidebar()"></div>

  <!-- Mobile Sidebar -->
  <aside class="mobile-sidebar" [class.active]="isMobileSidebarOpen">
    <div class="mobile-sidebar-header">
      <div class="logo">
        <i class="pi pi-file-edit"></i>
        <span class="brand-name">Cleansheet</span>
      </div>
      <button class="close-btn" (click)="closeMobileSidebar()">
        <i class="pi pi-times"></i>
      </button>
    </div>

    <nav class="mobile-nav">
      <a class="nav-item" routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
        (click)="closeMobileSidebar()">
        <i class="pi pi-file-edit"></i>
        <span>Resumes</span>
      </a>

      <a class="nav-item" routerLink="/dashboard/getting-started" routerLinkActive="active"
        (click)="closeMobileSidebar()">
        <i class="pi pi-briefcase"></i>
        <span>Builder</span>
      </a>



      <a class="nav-item" routerLink="/dashboard/ats-analysis" routerLinkActive="active" (click)="closeMobileSidebar()">
        <i class="pi pi-shield"></i>
        <span>ATS Analyzer</span>
      </a>

 

      <a class="nav-item" routerLink="/dashboard/settings" routerLinkActive="active" (click)="closeMobileSidebar()">
        <i class="pi pi-cog"></i>
        <span>Settings</span>
      </a>

      <button class="nav-item logout-btn" (click)="logout()">
        <i class="pi pi-power-off"></i>
        <span>Logout</span>
      </button>
    </nav>
  </aside>
</div>